{
  "info": {
    "name": "学习平台API测试",
    "description": "完整的后端API测试集合，包含用户管理、内容管理、审核系统等功能",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "身份验证",
      "item": [
        {
          "name": "用户注册",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"testuser@example.com\",\n  \"password\": \"password123\",\n  \"nickname\": \"测试用户\"\n}"
            },
            "url": {
              "raw": "http://localhost:8081/api/auth/register",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "用户登录",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "http://localhost:8081/api/auth/login",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "auth", "login"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "用户管理",
      "item": [
        {
          "name": "获取用户信息",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-User-Id",
                "value": "1"
              }
            ],
            "url": {
              "raw": "http://localhost:8081/api/users/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "users", "1"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "问题管理",
      "item": [
        {
          "name": "获取所有问题",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8081/api/questions",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "questions"]
            }
          },
          "response": []
        },
        {
          "name": "创建新问题",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-User-Id",
                "value": "3"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": 3,\n  \"title\": \"新的测试问题\",\n  \"content\": \"这是一个测试问题内容\"\n}"
            },
            "url": {
              "raw": "http://localhost:8081/api/questions",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "questions"]
            }
          },
          "response": []
        },
        {
          "name": "获取单个问题",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8081/api/questions/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "questions", "1"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "回答管理",
      "item": [
        {
          "name": "获取问题的回答",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8081/api/answers/question/1",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "answers", "question", "1"]
            }
          },
          "response": []
        },
        {
          "name": "创建回答",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"questionId\": 1,\n  \"userId\": 4,\n  \"content\": \"这是一个测试回答\"\n}"
            },
            "url": {
              "raw": "http://localhost:8081/api/answers",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "answers"]
            }
          },
          "response": []
        },
        {
          "name": "点赞回答",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": 3\n}"
            },
            "url": {
              "raw": "http://localhost:8081/api/answers/1/like",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "answers", "1", "like"]
            }
          },
          "response": []
        },
        {
          "name": "获取点赞数",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8081/api/answers/1/like-count",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "answers", "1", "like-count"]
            }
          },
          "response": []
        },
        {
          "name": "标记最佳答案",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": 3\n}"
            },
            "url": {
              "raw": "http://localhost:8081/api/answers/1/mark-best",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "answers", "1", "mark-best"]
            }
          },
          "response": []
        },
        {
          "name": "获取最佳答案",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8081/api/answers/question/1/best",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "answers", "question", "1", "best"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "资源管理",
      "item": [
        {
          "name": "获取所有资源",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:8081/api/resources",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "resources"]
            }
          },
          "response": []
        },
        {
          "name": "创建资源",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": 3,\n  \"title\": \"测试资源\",\n  \"url\": \"https://example.com/test\"\n}"
            },
            "url": {
              "raw": "http://localhost:8081/api/resources",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "resources"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "管理员功能",
      "item": [
        {
          "name": "获取所有用户（管理员）",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-User-Id",
                "value": "1"
              }
            ],
            "url": {
              "raw": "http://localhost:8081/api/admin/users",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "admin", "users"]
            }
          },
          "response": []
        },
        {
          "name": "按角色获取用户",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-User-Id",
                "value": "1"
              }
            ],
            "url": {
              "raw": "http://localhost:8081/api/admin/users/role/USER",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "admin", "users", "role", "USER"]
            }
          },
          "response": []
        },
        {
          "name": "更新用户角色",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Admin-Id",
                "value": "1"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"MODERATOR\"\n}"
            },
            "url": {
              "raw": "http://localhost:8081/api/admin/users/3/role",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "admin", "users", "3", "role"]
            }
          },
          "response": []
        },
        {
          "name": "封禁用户",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Admin-Id",
                "value": "1"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:8081/api/admin/users/3/ban",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "admin", "users", "3", "ban"]
            }
          },
          "response": []
        },
        {
          "name": "获取待审核内容",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-User-Id",
                "value": "1"
              }
            ],
            "url": {
              "raw": "http://localhost:8081/api/admin/content/pending",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "admin", "content", "pending"]
            }
          },
          "response": []
        },
        {
          "name": "审核通过问题",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Admin-Id",
                "value": "1"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:8081/api/admin/questions/3/approve",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "admin", "questions", "3", "approve"]
            }
          },
          "response": []
        },
        {
          "name": "审核通过回答",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Admin-Id",
                "value": "1"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:8081/api/admin/answers/3/approve",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "admin", "answers", "3", "approve"]
            }
          },
          "response": []
        },
        {
          "name": "审核通过资源",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Admin-Id",
                "value": "1"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:8081/api/admin/resources/3/approve",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "admin", "resources", "3", "approve"]
            }
          },
          "response": []
        },
        {
          "name": "删除问题",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "X-Admin-Id",
                "value": "1"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:8081/api/admin/questions/5",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "admin", "questions", "5"]
            }
          },
          "response": []
        },
        {
          "name": "获取系统统计",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-User-Id",
                "value": "1"
              }
            ],
            "url": {
              "raw": "http://localhost:8081/api/admin/stats",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "admin", "stats"]
            }
          },
          "response": []
        },
        {
          "name": "获取每日统计",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-User-Id",
                "value": "1"
              }
            ],
            "url": {
              "raw": "http://localhost:8081/api/admin/stats/daily?days=7",
              "protocol": "http",
              "host": ["localhost"],
              "port": "8081",
              "path": ["api", "admin", "stats", "daily"],
              "query": [
                {
                  "key": "days",
                  "value": "7"
                }
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": ["console.log('测试开始时间:', new Date().toISOString());"]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "pm.test('状态码为200', function () {",
          "    pm.response.to.have.status(200);",
          "});",
          "",
          "pm.test('响应时间小于1000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(1000);",
          "});"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8081",
      "type": "string"
    },
    {
      "key": "adminToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "adminId",
      "value": "1",
      "type": "string"
    }
  ],
  "auth": null
}